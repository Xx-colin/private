<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stream+</title>

<style>
:root{
--bg:#0d0d0f;
--text:white;
--glass:rgba(255,255,255,0.07);
}
.light{
--bg:#f5f5f7;
--text:black;
--glass:rgba(0,0,0,0.08);
}
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,sans-serif;}
body{background:var(--bg);color:var(--text);transition:.4s ease;}
nav{
position:fixed;top:0;width:100%;
padding:20px 50px;
display:flex;justify-content:space-between;
background:var(--glass);
backdrop-filter:blur(20px);
z-index:1000;
}
nav div{font-weight:500;}
button{
padding:8px 14px;border:none;border-radius:12px;
background:white;cursor:pointer;font-weight:500;
}
.hero{
height:80vh;
background:url("https://images.unsplash.com/photo-1505685296765-3a2736de412f") center/cover;
display:flex;flex-direction:column;justify-content:center;
padding-left:80px;position:relative;
}
.hero::after{
content:"";position:absolute;inset:0;
background:linear-gradient(to bottom,rgba(0,0,0,0.3),rgba(0,0,0,0.9));
}
.hero-content{position:relative;z-index:2;animation:fade 1.2s ease;}
@keyframes fade{from{opacity:0;transform:translateY(30px);}to{opacity:1;transform:translateY(0);}}
input{
padding:14px;border-radius:12px;border:none;width:250px;margin-right:10px;
}
.section{
padding:100px 80px 40px 80px;
}
.section h2{margin-bottom:20px;}
.grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
gap:20px;
}
.card{cursor:pointer;transition:.3s ease;}
.card img{width:100%;border-radius:20px;}
.card:hover{transform:scale(1.08);}
.loader{
display:none;
text-align:center;
font-size:20px;
padding:40px;
}
.overlay{
position:fixed;inset:0;
background:rgba(0,0,0,.9);
display:none;
align-items:center;
justify-content:center;
z-index:2000;
}
.overlay iframe{
width:90%;
height:80%;
border-radius:25px;
border:none;
}
.closeBtn{
position:absolute;
top:30px;right:50px;
background:white;padding:10px 15px;
}
.categoryBtns button{
margin-right:10px;
}
</style>
</head>

<body>

<nav>
<div> Stream+</div>
<button onclick="toggleMode()">Light/Dark</button>
</nav>

<section class="hero">
<div class="hero-content">
<h1>Watch Everything.</h1><br>
<input id="searchInput" placeholder="Suche Film oder Serie">
<button onclick="searchAll()">Suchen</button>
</div>
</section>

<section class="section">
<h2>Kategorien</h2>
<div class="categoryBtns">
<button onclick="loadTrending()">Trending</button>
<button onclick="loadCategory(28)">Action</button>
<button onclick="loadCategory(18)">Drama</button>
<button onclick="loadCategory(878)">Sci-Fi</button>
</div>
</section>

<div class="loader" id="loader">Loading...</div>

<section class="section">
<h2>Ergebnisse</h2>
<div class="grid" id="grid"></div>
</section>

<div class="overlay" id="overlay">
<button class="closeBtn" onclick="closePlayer()">Schlie√üen</button>
<iframe id="playerFrame"></iframe>
</div>

<script>
const API_KEY="9fa7b865c9720cab7dbc5e968d71bded";
const IMG="https://image.tmdb.org/t/p/w500";

function toggleMode(){
document.body.classList.toggle("light");
}

function showLoader(state){
document.getElementById("loader").style.display=state?"block":"none";
}

async function loadTrending(){
showLoader(true);
const res=await fetch(`https://api.themoviedb.org/3/trending/all/week?api_key=${API_KEY}`);
const data=await res.json();
display(data.results);
showLoader(false);
}

async function loadCategory(id){
showLoader(true);
const res=await fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_genres=${id}`);
const data=await res.json();
display(data.results);
showLoader(false);
}

async function searchAll(){
const q=document.getElementById("searchInput").value;
showLoader(true);
const res=await fetch(`https://api.themoviedb.org/3/search/multi?api_key=${API_KEY}&query=${q}`);
const data=await res.json();
display(data.results);
showLoader(false);
}

function display(items){
const grid=document.getElementById("grid");
grid.innerHTML="";
items.forEach(item=>{
if(!item.poster_path)return;
const div=document.createElement("div");
div.classList.add("card");
div.innerHTML=`<img src="${IMG+item.poster_path}">`;
div.onclick=()=>openPlayer(item);
grid.appendChild(div);
});
}

function openPlayer(item){
const overlay=document.getElementById("overlay");
overlay.style.display="flex";

if(item.media_type==="tv"){
openTV(item.id);
}else{
openMovie(item.id);
}
}

async function openTV(id){
const season=prompt("Staffel Nummer eingeben:");
const episode=prompt("Episode Nummer eingeben:");
document.getElementById("playerFrame").src=
`https://mapple.uk/watch/tv/${id}-${season}-${episode}?autoPlay=true`;
}

function openMovie(id){
document.getElementById("playerFrame").src=
`https://mapple.uk/watch/movie/${id}?autoPlay=true`;
}

function closePlayer(){
document.getElementById("overlay").style.display="none";
document.getElementById("playerFrame").src="";
}

loadTrending();
</script>

</body>
</html>
